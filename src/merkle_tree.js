const { MerkleTree } = require("merkletreejs");
const keccak256 = require("keccak256");

const getRoot = (address) => {
  address = "0xbf0a5683bd95d128c208DFEc41791a971fC34C99";

  const whitelistAddresses = [
    "0x34e7aC05CFB694EDA964F0EEe1168486716FD567",
    "0x82fCbA6e461594739dC8DED69E5d697872e1d653",
    "0x27d317f512D366E1E354403d5c59F35F5444f8C6",
    "0x11d31054071c2bfbd5d268dea6e03847ba1f0bc8",
    "0xCC0667918269b17Ce269A2401a51b84aBAC5c141",
    "0xEdaB5Fc404748851E0f30AdAaefd36fD71a3B39e",
    "0xa9318CcbB56c8A3C1533e08d0192b98a1146d3dC",
    "0xFC240fE14491f27DddA1077B6e25d939176C6E14",
    "0xb62bA52124F3022aCAef88E458688bBb568f4BDE",
    "0x08259154Dfd192A135E03E8eF8d22885f63874a0",
    "0x02860e1bBd7CF13f438840588e0fCb50fc818e8f",
    "0xC23684fA92DdAA62324f6cfaf27D7ED5637d25E1",
    "0x8a054CcDFe4b918004cD927eC47274000909ff75",
    "0xdB988C8762ad2021432a6B52a20179D67F7FC6Ee",
    "0x7ACE5F5aCB2d9153A6dF3e82825116a57AA7FC2C",
    "0x8a054CcDFe4b918004cD927eC47274000909ff75",
    "0x51B75682DbDb24406940c9fd61275fd2E2dD78c4",
    "0x26DD4e397f5AFF86F8A1c2ee3Cb4f31F071AFAdC",
    "0xf20D2762203F5568f6C9263e266F61d9037F9a1D",
    "0x0123736E883945E29E0059849Db5AefF5a0D141a",
    "0xdd242E3a5FbFcCd5B8531597D349928398264ca5",
    "0x9D951b1ba0391bbDDb12E144633f20441E78d79e",
    "0xce2c1bc9b30dece7b7aD2b09e86c701Baf1059E6",
    "0x23f5d52bb6e4d6503d18eca30922a3afa526e914",
    "0x525B81ba93fD8dBbDf7aE439c6726E32a1df119B",
    "0x805ee0896b1079DDbA0668A97a724165166A0E03",
    "0x29559597030B77ee787CF2C12C653A09ACccf918",
    "0x1bbB91Db592fb6690C91470F270565D5239C063f",
    "0x8c89711eAFeEef551943ed5e77d341214E290ed9",
    "0xeC4F23b53B97A1398f2d9171Fca3A9837dEeB317",
    "0x435a679FB7c6942cd8eCea01412574b1E807AF8D",
    "0x7A605E8B33071d43269f4A3B9C80A39ae7983F19",
    "0x64ca9ad6b0bb3F719637570fF7F86C3496fe3858",
    "0x10278b61D697Fe496081B2560ac5BDb60D3742a5",
    "0x614c18377Cda1c75167505EAe2e5ecf863941983",
    "0x75d403e52D290B1a9B90d2212E4B30AD454A12cb",
    "0x81fc5c5f822B218AacD93312400d0e89E95D791C",
    "0x394D265648CE8afC798e64952f91d23b2dD14391",
    "0x2C7E922A30253e650b0E9615Db5f4b8d80aC4c62",
    "0x4DC9379eC95133Ecf3948E9080669D3B31432369",
    "0xB7A61e75490D50B3B0949e5938e91dA98bE0e86c",
    "0x9016C344207908609F84da5f45eCBC7E4a493a38",
    "0xeCA885F1c55f5Ad7B162107420b372786389bAD1",
    "0xae63209d8ad5a573eb36a48d2bf71db030c1585e",
    "0x575de1330E6C2D44d8EfE1dC3f380cf28859da2a",
    "0x735c4E5bCaF6CFB1F2870d7220634268B47Da5c5",
    "0x8c78076E9e0533A623C50841e27006E56917AF32",
    "0x30a42D9eB293407f408099944e31632E0f167fe5",
    "0x355e4aBFf4EEcBfde5E5f0c15aC983F9E4102aFf",
    "0xC9644De61Db3b08CA080b23aAB12C7e880F8a33D",
    "0x63950aAcA5ec4bd42b05E304dc54D7D51FB72b24",
    "0x66f20812C46c32FF1aBb86d62262201BBC076120",
    "0x7675F7597A01E8657BB15debfcf62a9D3df15443",
    "0x76c679817984238cbaf67982d8C0cfc5fF241711",
    "0xAF9C51614Ed8BdC4768f51C6acc7650b9439Bd73",
    "0x876bc399Be7B5e6e1EEa3D04Bb63c1c520f98a55",
    "0x355e4aBFf4EEcBfde5E5f0c15aC983F9E4102aFf",
    "0x2f22e91047E1A6d11Cae877dD8816350f0dd1A9a",
    "0x2AEd1eBf04F80f07195Ffe271281a35b494C5022",
    "0x8240F7FEc0f008a28843104ed3dEE23C36BfadB0",
    "0x76676341692A14d872bbE36E3AE8F9AF44A40784",
    "0x1b281daAC56D61821f7Dc7943eE96A023faC0118",
    "0x609493f5Cdad916d22315c31beEE9CEA9530eA0a",
    "0x559Aa1466F371563dCBD5Ebd712856473eD2Aa0B",
    "0x9Ab3cb73fd572032CB990a02d9f851F7244AB11F",
    "0x2AEd1eBf04F80f07195Ffe271281a35b494C5022",
    "0xafe3bf864c426f11115b07d5899a4419504eeded",
    "0xAb8483F64d9C6d1EcF9b849Ae677dD3315835cb2",
    "0xbf0a5683bd95d128c208DFEc41791a971fC34C99",
  ];
  const leaves = whitelistAddresses.map((x) => keccak256(x));
  const tree = new MerkleTree(leaves, keccak256, { sortPairs: true });

  const buf2hex = (x) => "0x" + x.toString("hex");

  const leaf = keccak256(address); // address from wallet using walletconnect/metamask
  const proof = tree.getProof(leaf).map((x) => buf2hex(x.data));
  console.log(proof);
  return proof;
};
